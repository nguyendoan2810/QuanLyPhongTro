@model List<QuanLyPhongTro.Areas.QuanLy.Models.ViewModels.HoaDonViewModel> 

<div id="bills-section" class="section hidden"> 
    <div class="bg-white rounded-xl shadow-sm border border-gray-100">
        <div class="p-6 border-b border-gray-200">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                <h3 class="text-lg font-semibold text-gray-800">Quản lý Hóa đơn</h3>
                <div class="flex gap-3">
                    <select class="form-input px-4 py-2 rounded-lg focus:outline-none">
                        <option>Tháng này</option> <option>Tháng trước</option>
                        <option>3 tháng gần đây</option> </select>
                        <button onclick="openModal('createBillModal')" class="btn-primary text-white px-4 py-2 rounded-lg flex items-center">
                            <i class="fas fa-plus mr-2"></i>Tạo hóa đơn</button>
                </div>
             </div>
        </div>
        <div class="overflow-x-auto">
             <table class="w-full">
                 <thead class="bg-gray-50">
                     <tr>
                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mã HĐ</th>
                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Phòng</th>
                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Khách thuê</th>
                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kỳ hóa đơn</th>
                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tổng tiền</th>
                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trạng thái</th>
                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày tạo</th>
                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Hạn thanh toán</th>
                         <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thao tác</th> </tr>
                 </thead>
                 
                 <tbody class="bg-white divide-y divide-gray-200">
                     @foreach (var item in Model) { 
                         <tr> <td class="px-6 py-4">@item.MaHoaDonHienThi</td>
                             <td class="px-6 py-4">@item.TenPhong</td>
                             <td class="px-6 py-4">@item.TenKhachThue</td>
                             <td class="px-6 py-4">@item.KyHoaDon</td>
                             <td class="px-6 py-4 font-semibold">@item.TongTien.ToString("N0") VNĐ</td>
                             <td class="px-6 py-4">
                                 <span class="@(item.TrangThai == "Đã thanh toán" ? "status-occupied" : "status-maintenance") px-3 py-1 text-xs font-semibold rounded-full text-white"> @item.TrangThai </span>
                             </td>
                             <td class="px-6 py-4 text-blue-600">@item.NgayTao?.ToString("dd/MM/yyyy")</td>
                             <td class="px-6 py-4 @(item.TrangThai == "Chưa thanh toán" ? "text-red-600 font-medium" : "text-gray-500")"> @item.HanThanhToan?.ToString("dd/MM/yyyy") </td>
                             <td class="px-6 py-4"> 
                                 <button class="text-green-600 hover:text-green-900 mr-3"><i class="fas fa-eye mr-1"></i>Xem</button>
                                 @if (item.TrangThai == "Đã thanh toán") { 
                                     <button class="text-blue-600 hover:text-blue-900 mr-3"><i class="fas fa-print mr-1"></i>In</button>
                                 } else { 
                                     <button class="text-blue-600 hover:text-blue-900 mr-3"><i class="fas fa-credit-card mr-1"></i>Thanh toán</button>
                                     <button class="text-orange-600 hover:text-orange-900"><i class="fas fa-bell mr-1"></i>Nhắc nhở</button>
                                 } 
                             </td>
                         </tr>
                     }
                 </tbody>
             </table>
        </div>
    </div>
</div>

@await Html.PartialAsync("~/Areas/QuanLy/Views/HoaDon/Create.cshtml")